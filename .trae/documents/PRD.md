# Icons - macOS AI图标生成应用产品需求文档 (PRD)

## 1. 产品概述

### 1.1 产品定位
Icons 是一款 macOS 原生应用，基于 Swift + SwiftUI 开发，为开发者提供 AI 驱动的 iOS/macOS 应用图标生成服务。用户通过自然语言描述或选择官方模板，即可生成符合 Apple 设计规范的高质量应用图标。

### 1.2 核心价值主张
- **智能生成**：基于 AI 模型（ModelScope Qwen/Qwen-Image 和 Alibaba Cloud Qwen-Image）生成专业级图标
- **原生体验**：macOS 原生应用，深度集成系统功能
- **开发者友好**：直接输出 .appiconset/.iconset 格式，可直接导入 Xcode
- **商业授权**：Pro 版本提供商用授权，满足商业开发需求

### 1.3 目标用户
- **主要用户**：iOS/macOS 应用开发者
- **次要用户**：UI/UX 设计师、独立开发者、小型开发团队

## 2. 功能需求

### 2.1 核心功能

#### 2.1.1 启动与项目管理
- 启动页面展示
- 新建项目（选择模板或空白开始）
- 项目历史记录管理

#### 2.1.2 模板系统
- **模板库**：5-10个官方模板（扁平、玻璃、3D、拟物、线条、渐变等风格）
- **模板预览**：实时预览模板效果
- **模板选择**：一键应用模板到当前项目

#### 2.1.3 Prompt 编辑器
- **多语言支持**：中文/英文输入
- **智能提示**：示例 prompt 展示
- **历史记录**：保存用户输入历史
- **参数化模板**：支持 {app_name}、{sf_symbol}、{style} 等变量

#### 2.1.4 SF Symbols 集成
- **符号搜索**：本地 SF Symbols 库搜索
- **符号预览**：实时预览符号效果
- **符号注入**：将符号名称注入到 prompt 中
- **矢量合成**：可选的本地矢量 overlay 合成

#### 2.1.5 AI 图标生成
- **生成按钮**：一键触发生成流程
- **进度显示**：实时显示生成进度
- **候选展示**：生成3个候选图标供选择
- **预览模式**：1:1 和 2x 放大预览

#### 2.1.6 图标微调
- **颜色替换**：调整图标主色调
- **符号替换**：更换 SF Symbol
- **重新生成**：基于当前设置重新生成
- **风格强度**：调整风格应用程度

#### 2.1.7 导出功能
- **平台选择**：iOS/macOS/通用
- **尺寸配置**：自动生成所需尺寸
- **格式支持**：.appiconset/.iconset
- **Contents.json**：自动生成配置文件
- **ZIP 打包**：可选的压缩包导出
- **系统集成**：直接在 Icon Composer 或 Xcode 中打开

### 2.2 订阅与账户功能

#### 2.2.1 用户等级
- **免费版**：每日2次生成，512×512分辨率，带水印，非商用
- **Pro版**：¥39/月或¥468/年，月100张或优先队列，1024×1024，无水印，商用授权

#### 2.2.2 订阅管理
- **StoreKit 2 集成**：原生订阅购买流程
- **账户页面**：显示订阅状态、剩余次数、到期时间
- **升级引导**：免费用户超限时的升级提示
- **收据验证**：服务端验证订阅状态

#### 2.2.3 配额管理
- **使用统计**：实时显示剩余生成次数
- **重置机制**：每日/每月配额重置
- **超量处理**：Pro用户超量计费机制

### 2.3 辅助功能

#### 2.3.1 历史记录
- **本地存储**：生成历史本地保存
- **记录浏览**：历史项目浏览界面
- **记录管理**：删除、导出历史记录
- **自动清理**：30天自动清理机制

#### 2.3.2 设置与偏好
- **界面设置**：主题、语言偏好
- **导出设置**：默认导出格式、命名规则
- **隐私设置**：数据保留、删除选项

## 3. 非功能需求

### 3.1 性能要求
- **启动时间**：< 3秒
- **生成响应**：< 30秒（网络正常情况下）
- **界面响应**：< 100ms
- **内存占用**：< 200MB（正常使用）

### 3.2 兼容性要求
- **系统版本**：macOS 13.0+
- **架构支持**：Intel x64 + Apple Silicon
- **Xcode兼容**：支持 Xcode 14+ 导入

### 3.3 可用性要求
- **服务可用性**：99.5%
- **错误恢复**：网络中断后自动重试
- **降级策略**：API 不可用时的备用方案

### 3.4 安全要求
- **API 密钥保护**：不在客户端存储 API 密钥
- **数据传输**：HTTPS 加密传输
- **隐私保护**：符合 GDPR/CCPA 要求

## 4. 用户体验设计

### 4.1 界面布局
- **三栏布局**：左侧模板栏 - 中央画布 - 右侧属性面板
- **响应式设计**：适配不同屏幕尺寸
- **原生控件**：使用 macOS 原生 UI 组件

### 4.2 交互流程
1. 启动应用 → 选择模板或新建项目
2. 编辑 Prompt → 选择 SF Symbol（可选）
3. 点击生成 → 查看候选结果
4. 选择并微调 → 导出图标包
5. 在 Xcode 中导入使用

### 4.3 视觉设计
- **设计语言**：遵循 Apple Human Interface Guidelines
- **色彩方案**：支持浅色/深色模式
- **图标风格**：SF Symbols 风格图标

## 5. 技术约束

### 5.1 开发技术栈
- **客户端**：Swift + SwiftUI
- **系统集成**：部分 AppKit 功能
- **图像处理**：Core Image / vImage
- **网络请求**：URLSession

### 5.2 外部依赖
- **AI 服务**：ModelScope API、Alibaba Cloud Qwen-Image
- **支付服务**：App Store StoreKit 2
- **后端服务**：自建中间层 API

### 5.3 数据存储
- **本地存储**：Core Data / UserDefaults
- **云端存储**：临时图片缓存（7-30天）

## 6. 商业模式

### 6.1 定价策略
- **免费版**：基础功能，有限制
- **Pro月付**：¥39/月
- **Pro年付**：¥468/年（相当于月付8折）

### 6.2 收入预期
- **目标用户**：1000+ 月活用户（上线后3个月）
- **转化率目标**：5% 免费用户转Pro
- **ARPU目标**：¥20/月/用户

## 7. 风险与限制

### 7.1 技术风险
- **AI API 稳定性**：第三方服务可用性风险
- **生成质量**：AI 生成结果质量不稳定
- **兼容性问题**：Xcode 版本更新导致的兼容性问题

### 7.2 商业风险
- **App Store 审核**：AI 生成内容的审核风险
- **竞品压力**：市场竞争加剧
- **成本控制**：AI API 调用成本上升

### 7.3 法律风险
- **版权问题**：AI 生成内容的版权归属
- **商用授权**：模型服务商授权条款变更
- **隐私合规**：数据保护法规要求

## 8. 成功指标

### 8.1 产品指标
- **用户增长**：月活用户数
- **用户留存**：7日留存率 > 30%
- **转化率**：免费转Pro > 5%
- **用户满意度**：App Store 评分 > 4.0

### 8.2 技术指标
- **生成成功率**：> 95%
- **响应时间**：< 30秒
- **崩溃率**：< 0.1%
- **API 成本**：< ¥2/张

### 8.3 商业指标
- **月收入**：目标 ¥50,000/月（上线后6个月）
- **用户生命周期价值**：> ¥200
- **获客成本**：< ¥50/用户

---

**文档版本**：v1.0  
**创建日期**：2024年12月  
**负责人**：产品经理  
**审核人**：技术负责人