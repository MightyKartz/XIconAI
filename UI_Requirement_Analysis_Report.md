# UI 需求分析报告

## 1. 整体需求识别

根据项目规则和 `Icons/Views` 目录结构，Icons 应用的主要 UI 模块和功能如下：

*   **主导航 (Main Navigation)**: 应用的整体框架，包含底部标签页和右侧边栏。
    *   `MainNavigationView.swift`
    *   `BottomTabContent.swift`
    *   `BottomTabSelector.swift`
    *   `NavigationTabButton.swift`
    *   `RightSidebarView.swift`
*   **图标编辑器 (Icon Editor)**: 核心功能，用于编辑和生成图标。
    *   `MainIconEditorView.swift`
    *   `Editor/PromptEditorSection.swift`
    *   `Editor/PromptEditorView.swift`
*   **结果展示 (Results)**: 显示生成的图标。
    *   `Results/IconResultsView.swift`
*   **导出配置 (Export)**: 配置图标导出选项。
    *   `Export/ExportConfigurationView.swift`
*   **历史记录 (History)**: 查看生成历史。
    *   `History/HistoryView.swift`
*   **SF Symbols 浏览 (SFSymbols)**: 浏览和选择 SF Symbols。
    *   `SFSymbols/SFSymbolsView.swift`
*   **设置 (Settings)**: 应用配置。
    *   `Settings/SettingsView.swift`
*   **模板管理 (Templates)**: 模板的导入、新建、库管理和预览。
    *   `Templates/ImportTemplateView.swift`
    *   `Templates/NewTemplateView.swift`
    *   `Templates/TemplateLibraryView.swift`
    *   `Templates/TemplatePreviewView.swift`
*   **共享组件 (Shared)**: 可复用的 UI 组件。
    *   `Shared/SharedComponents.swift`

## 2. 设计稿分析 (模拟)

根据项目规则中的"UI/UX 基线"描述，模拟设计稿内容如下：

### 2.1 首页布局

*   **左侧模板栏**: 显示可用的图标模板，用户可选择。
*   **中央画布**: 1:1 或 2x 预览生成的图标，支持颜色/符号替换与再生成微调。
*   **右侧属性面板**: 包含颜色、风格强度、SF Symbol 等属性调整。

### 2.2 交互流程

*   **图标生成**: 默认一次生成 3 个候选图标。
*   **导出对话**: 弹出对话框，允许用户选择平台/尺寸、是否含 alpha、命名前缀、是否打包 ZIP。
*   **超限弹窗**: 当用户超出配额时，弹出引导升级 Pro 的弹窗，清晰说明权益与限制。

## 3. shadcn/ui 组件适用性评估 (参考 SwiftUI 实现)

虽然项目使用 SwiftUI，但 shadcn/ui 的设计理念和组件类型可以作为参考，指导 SwiftUI 组件的实现。

*   **Button (按钮)**: 广泛应用于导航、操作、确认等场景。例如：`NavigationTabButton`、生成按钮、导出按钮、弹窗确认/取消按钮。
*   **Input (输入框)**: 用于用户输入文本，如 Prompt 编辑器中的文本输入框、设置中的配置输入。
*   **Select (选择器)**: 用于选择预设选项，如模板选择、导出平台/尺寸选择。
*   **Slider (滑块)**: 用于调整数值范围，如风格强度调整。
*   **Dialog (对话框)**: 用于导出配置、超限提示等。
*   **Tabs (标签页)**: 底部导航栏可以使用标签页组件。
*   **Sidebar (侧边栏)**: 右侧属性面板和左侧模板栏可以借鉴侧边栏的设计。
*   **Card (卡片)**: 用于展示模板、生成的图标候选等。
*   **Form (表单)**: 导出配置和设置页面会涉及表单输入。
*   **Tooltip/Popover (工具提示/气泡框)**: 用于提供额外信息或上下文操作。

## 4. 自定义组件和样式调整

考虑到 Icons 应用的特定需求和 SwiftUI 的特性，以下组件和样式可能需要自定义或进行深度调整：

*   **图标预览画布**: 中央画布需要高度定制，支持 1:1/2x 预览、拖拽、缩放、SF Symbol 叠加、颜色替换等复杂交互。
*   **SF Symbol 搜索与展示**: `SFSymbolsView` 需要一个高效的搜索功能和美观的 SF Symbol 展示网格。
*   **模板展示与编辑**: `TemplateLibraryView` 和 `PromptEditorView` 需要自定义布局来展示模板的占位符和编辑区域。
*   **自定义颜色选择器**: 属性面板中的颜色选择可能需要一个更直观、更符合应用主题的自定义颜色选择器。
*   **应用主题与品牌化**: 整体应用的主题颜色、字体、间距等需要统一的样式系统，以符合品牌形象。
*   **响应式布局**: 考虑到 macOS 应用的窗口大小可变性，需要确保 UI 能够良好地适应不同尺寸的窗口。
*   **性能优化**: 对于图标生成和预览，需要关注 UI 渲染性能，避免卡顿。

## 5. 现代化界面设计要求分析

### 5.1 暗黑模式切换功能需求

基于对现有系统的分析，暗黑模式切换功能需要以下组件支持：

#### 5.1.1 主题切换组件
- **组件名称**：ThemeToggleView
- **功能要求**：
  - 提供暗黑/浅色模式切换按钮
  - 显示当前主题状态
  - 支持跟随系统主题选项
- **数据元素**：
  - 当前主题状态（浅色/深色/跟随系统）
  - 可选主题列表
- **用户交互**：
  - 点击切换主题模式
  - 选择跟随系统选项
- **视觉状态**：
  - 浅色模式状态
  - 深色模式状态
  - 跟随系统状态
- **依赖组件**：ThemeService

#### 5.1.2 主题偏好设置面板
- **组件名称**：ThemePreferencePanel
- **功能要求**：
  - 集中管理主题设置
  - 提供主题选择器
  - 提供强调色选择器
- **数据元素**：
  - 可用主题列表
  - 当前选择的主题
  - 可用强调色列表
  - 当前选择的强调色
- **用户交互**：
  - 选择主题模式
  - 选择强调色
- **视觉状态**：
  - 各主题模式预览
  - 强调色预览
- **依赖组件**：ThemeService, SettingsView

### 5.2 统一设计规范实现需求

#### 5.2.1 色彩系统组件

##### 颜色选择器组件
- **组件名称**：ColorPickerView
- **功能要求**：
  - 显示预定义颜色选项
  - 支持自定义颜色选择
  - 实时预览颜色效果
- **数据元素**：
  - 预定义颜色列表
  - 当前选中颜色
  - 自定义颜色值
- **用户交互**：
  - 点击选择预定义颜色
  - 使用颜色选择器选择自定义颜色
- **视觉状态**：
  - 选中状态高亮
  - 颜色预览效果
- **依赖组件**：ThemeService

##### 调色板管理组件
- **组件名称**：ColorPaletteManager
- **功能要求**：
  - 管理应用色彩方案
  - 提供色彩对比度检查
  - 支持色彩方案导出/导入
- **数据元素**：
  - 主色、辅色、背景色、文字色等
  - 色彩对比度值
- **用户交互**：
  - 修改色彩值
  - 检查色彩对比度
- **视觉状态**：
  - 色彩方案预览
  - 对比度检查结果
- **依赖组件**：ThemeService

#### 5.2.2 间距布局组件

##### 响应式容器组件
- **组件名称**：ResponsiveContainerView
- **功能要求**：
  - 根据屏幕尺寸自动调整布局
  - 支持多种断点设置
  - 提供间距控制选项
- **数据元素**：
  - 当前屏幕尺寸
  - 布局断点配置
  - 间距值设置
- **用户交互**：
  - 自动响应屏幕尺寸变化
- **视觉状态**：
  - 不同屏幕尺寸下的布局效果
- **依赖组件**：LayoutService

##### 间距控制组件
- **组件名称**：SpacingControlView
- **功能要求**：
  - 统一管理应用内间距
  - 提供间距预设选项
  - 支持自定义间距值
- **数据元素**：
  - 预设间距值列表
  - 当前选择的间距值
- **用户交互**：
  - 选择预设间距
  - 输入自定义间距值
- **视觉状态**：
  - 间距效果预览
- **依赖组件**：LayoutService

#### 5.2.3 字体层级组件

##### 字体样式管理组件
- **组件名称**：TypographyManagerView
- **功能要求**：
  - 管理应用字体层级
  - 提供字体样式预览
  - 支持字体大小调整
- **数据元素**：
  - 标题、正文、辅助文字等字体样式
  - 字体大小设置
  - 字体粗细设置
- **用户交互**：
  - 调整字体大小
  - 选择字体粗细
- **视觉状态**：
  - 不同层级字体效果预览
- **依赖组件**：无特定依赖

##### 文本组件
- **组件名称**：ThemedTextView
- **功能要求**：
  - 根据主题自动调整文本颜色
  - 支持多种文本层级
  - 提供文本对齐选项
- **数据元素**：
  - 文本内容
  - 文本层级（标题/正文/辅助等）
  - 对齐方式
- **用户交互**：
  - 文本选择
  - 文本复制
- **视觉状态**：
  - 不同主题下的文本颜色
  - 不同层级的字体样式
- **依赖组件**：ThemeService

#### 5.2.4 交互动效组件

##### 动画控制面板
- **组件名称**：AnimationControlPanel
- **功能要求**：
  - 集中管理应用动画设置
  - 提供动画速度调节
  - 支持动画开关控制
- **数据元素**：
  - 动画启用状态
  - 动画速度设置
  - 动画类型列表
- **用户交互**：
  - 开启/关闭动画
  - 调整动画速度
- **视觉状态**：
  - 动画效果预览
- **依赖组件**：InteractionService

##### 交互动效组件
- **组件名称**：InteractiveFeedbackView
- **功能要求**：
  - 提供按钮按压效果
  - 提供悬停效果
  - 提供加载动画效果
- **数据元素**：
  - 交互状态（正常/悬停/按压/加载等）
  - 动画参数
- **用户交互**：
  - 鼠标悬停
  - 点击按压
  - 加载状态显示
- **视觉状态**：
  - 不同交互状态的视觉反馈
- **依赖组件**：InteractionService

## 6. 实施建议

### 6.1 优先级排序
1. **高优先级**：主题切换功能、基础色彩系统、响应式布局组件
2. **中优先级**：字体层级组件、基础交互动效组件
3. **低优先级**：高级色彩管理、自定义动画效果、触觉反馈实现

### 6.2 实施步骤
1. 完善主题切换功能，在设置面板中添加直观的主题选择器
2. 优化现有组件以支持主题变化
3. 建立统一的间距和字体规范
4. 增强交互动效系统
5. 提供设计规范文档供团队使用

### 6.3 技术考虑
- 利用现有的 ThemeService、LayoutService 和 InteractionService
- 确保所有组件支持动态主题切换
- 保持组件的一致性和可复用性
- 考虑性能影响，特别是在动画和布局计算方面